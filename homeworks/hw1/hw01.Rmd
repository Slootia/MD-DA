---
title: "hw01"
author: "Кузьминых И. С., РИ-450004"
date: "December 16, 2018"
output: html_document
---

## Работа с данными

Загрузка данных:

```{r data.df read}
data.df <- read.table("http://people.math.umass.edu/~anna/Stat597AFall2016/rnf6080.dat")
```

Получение количества строк, столбцов, названий колонок, значение из 5 строки 7 столбца, 2 строки:

``` {r data.df info}
nrow(data.df); ncol(data.df)
colnames(data.df)
data.df[5, 7]
data.df[2, ]
```

Именование колонок (в крайних 24 колонках лежат значения за соответствующий час):

``` {r data.df names}
names(data.df) <- c("year", "month", "day", seq(0, 23))
head(data.df)
```

Создание и добавление новой колонки, содержащей сумму крайних 24 колонок, построение гистограммы:

``` {r data.df daily}
daily = vector(length = nrow(data.df))
for (i in seq(1, nrow(data.df))) {
  daily[i] <- sum(data.df[i, 4 : 27])
}
data.df <- cbind(data.df, daily)
hist(data.df[, "daily"], main="Unfixed data", xlab="Values")
```

По гистограмме видно появление отрицательных значений, которых, видимо, не должно быть.
Загрузим данные в новый датафрейм, заменим отрицательные значения на 0 и повторим предыдущую процедуру:

``` {r fixed.df}
fixed.df <- read.table("http://people.math.umass.edu/~anna/Stat597AFall2016/rnf6080.dat")
fixed.df[fixed.df < 0] <- 0
for (i in seq(1, nrow(fixed.df))) {
  daily[i] <- sum(fixed.df[i, 4 : 27])
}
fixed.df <- cbind(fixed.df, daily)
hist(fixed.df[, "daily"], main="Fixed data", xlab="Values")
```

## Синтаксис и типизирование

``` {r}
v <- c("4", "8", "15", "16", "23", "42")
```

Вектор v содержит строки, а они сравниваются лексикографически, а точнее в порядке возрастания кода в таблице юникода каждого символа по очереди:

``` {r}
max(v)
sort(v)
```

Во время выполнения функции sum() происходит ошибка, потому что не предусмотрена её работа со строками:

``` {r}
# sum(v) - Ошибка в sum(v) :неправильный 'type' (character) аргумента
```

``` {r}
v2 <- c("5",7,12)
```

Вектор является гомогенным контейнером, поэтому при добавлении в него значений различных типов они конвертируются в наиболее "общий". Любое число можно представить как строку, но не наоборот, поэтому вектор получается заполнен строками, для которых оператор "+" не имеет смысла:

``` {r}
v2
# v2[2] + v2[3] - Ошибка в v2[2] + v2[3] :нечисловой аргумент для бинарного оператора
```
(Я же правильно понял, что Вы здесь случайно пропустили v во втором слагаемом?)

Датафрейм, в свою очередь, может содержать различные типы данных в разных столбцах:

``` {r}
df3 <- data.frame(z1="5",z2=7,z3=12)
df3[1,2] + df3[1,3]
```

Списки также являются гетерогенными. Обращения к элементам списков через одинарные квадратные скобки возвращает элемент вместе с названием, чтобы опустить название, нужно обращаться через двойные:

``` {r}
l4 <- list(z1="6", z2=42, z3="49", z4=126)
l4[[2]]
l4[[2]] + l4[[4]]
l4[2]
# l4[2] + l4[4] - Ошибка в v2[2] + v2[3] :нечисловой аргумент для бинарного оператора
```